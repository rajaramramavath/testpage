<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Class Schedule</title>
  <script type="module">
    // âœ… Import Firebase from CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, getDoc } 
      from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ðŸ”‘ Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBEfI4QzJU2kc2PEp02x36BftvO6P5qJps",
      authDomain: "admindemon-b3823.firebaseapp.com",
      databaseURL: "https://admindemon-b3823-default-rtdb.firebaseio.com",
      projectId: "admindemon-b3823",
      storageBucket: "admindemon-b3823.appspot.com",
      messagingSenderId: "33424574422",
      appId: "1:33424574422:web:96db3c6388d89d162c4677",
      measurementId: "G-188H3B2LSZ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadSections() {
      const sectionSelect = document.getElementById("sectionSelect");
      const snapshot = await getDocs(collection(db, "sections"));
      snapshot.forEach(doc => {
        const option = document.createElement("option");
        option.value = doc.id;
        option.textContent = doc.data().name;
        sectionSelect.appendChild(option);
      });
    }

    async function showSchedule() {
      const sectionId = document.getElementById("sectionSelect").value;
      const day = document.getElementById("daySelect").value;
      if (!sectionId || !day) return;

      const sectionDoc = await getDoc(doc(db, "sections", sectionId));
      const subjects = sectionDoc.data().subjects?.[day] || [];
      const scheduleDiv = document.getElementById("schedule");
      scheduleDiv.innerHTML = "";

      if (subjects.length === 0) {
        scheduleDiv.textContent = "No subjects for this day.";
        return;
      }

      subjects.forEach(sub => {
        const div = document.createElement("div");
        div.textContent = `${sub.time} - ${sub.name}`;
        scheduleDiv.appendChild(div);
      });
    }

    window.onload = loadSections;
    window.showSchedule = showSchedule;
  </script>
</head>
<body>
  <h1>Class Schedule</h1>
  <label>Section:
    <select id="sectionSelect" onchange="showSchedule()">
      <option value="">Select Section</option>
    </select>
  </label>
  <br><br>
  <label>Day:
    <select id="daySelect" onchange="showSchedule()">
      <option value="">Select Day</option>
      <option>Monday</option>
      <option>Tuesday</option>
      <option>Wednesday</option>
      <option>Thursday</option>
      <option>Friday</option>
      <option>Saturday</option>
    </select>
  </label>
  <hr>
  <div id="schedule"></div>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Timetable Viewer</title>
</head>
<body>
  <h1>Timetable</h1>
  <label>Section:</label>
  <select id="section"></select>
  <label>Day:</label>
  <select id="day">
    <option>monday</option>
    <option>tuesday</option>
    <option>wednesday</option>
    <option>thursday</option>
    <option>friday</option>
    <option>saturday</option>
  </select>
  <button id="load">Load</button>

  <ul id="output"></ul>

  <script type="module">
    import { db, ref, get } from './firebase.js';

    async function loadSections() {
      const snapshot = await get(ref(db, 'timetable'));
      const sections = snapshot.exists() ? Object.keys(snapshot.val()) : [];
      const sel = document.getElementById('section');
      sel.innerHTML = sections.map(s => `<option>${s}</option>`).join('');
    }

    async function loadTimetable() {
      const section = document.getElementById('section').value;
      const day = document.getElementById('day').value;
      const snapshot = await get(ref(db, `timetable/${section}/${day}`));
      const list = document.getElementById('output');
      list.innerHTML = '';
      if (snapshot.exists()) {
        snapshot.val().forEach(item => {
          const li = document.createElement('li');
          li.textContent = `${item.time} â€” ${item.subject}`;
          list.appendChild(li);
        });
      } else {
        list.innerHTML = '<li>No data</li>';
      }
    }

    document.getElementById('load').addEventListener('click', loadTimetable);

    loadSections();
  </script>
</body>
</html>
